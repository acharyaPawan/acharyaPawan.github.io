---
title: 'Devlog: Runtime Log Tooling Experiments'
publishedAt: '2025-01-28'
updatedAt: '2025-02-01'
summary: 'Notes from building a streaming log CLI that stitches Kubernetes pods, feature flags, and trace IDs together.'
type: 'Devlog'
status: 'published'
tags:
  - logs
  - cli
  - devex
series: 'Instrumentation Quest'
seriesOrder: 1
slug: 'runtime-log-tooling'
coverImage: 'https://images.unsplash.com/photo-1483478550801-ceba5fe50e8e?auto=format&fit=crop&w=1400&q=80'
canonicalUrl: 'https://acharya.dev/devlogs/runtime-log-tooling'
readingTime: 5
references:
  - id: 'honeycomb'
    title: 'Honeycomb Guide to Structured Logging'
    url: 'https://www.honeycomb.io/blog/structured-logging'
    author: 'Emily Nakashima'
    publishedAt: '2023-06-02'
  - 'https://kubernetes.io/docs/concepts/cluster-administration/logging/'
related:
  - devlog-observability
---

### Why a new CLI?

Our existing `kubectl logs` incantations required five different flags and still
missed platform logs. The CLI we prototyped (`fluxlog`) does three things:

1. Pipes logs from multiple pods and sorts them by timestamp so that interleaved
   deploys become readable.
2. Parses feature-flag toggles baked into the log line so product folks can peek
   at experiments.
3. Emits trace IDs that we can click to open a Tempo search.

### A quick architecture sketch

```
kubectl -> lightweight Rust parser -> streaming renderer (Ink)
```

Rust handles the parsing mostly for performance, while Ink renders a friendly
terminal UI with pause/resume and filter shortcuts. We run the CLI in GitHub
Codespaces too, so the binary needs to cross-compile (thank you, `cross` crate).

### Lessons learned

- **Structured logs win**. Once we switched everything to JSON and piped it
  through `jq`, the CLI became mostly glue code.
- **Streaming tests** are underrated. We wrote snapshot tests using fixture logs
  from the provisioning service, which caught several regressions when we added
  colorized output.
- **Correlate everything**. The CLI auto-injects links back to traces and
  dashboards built in the `devlog-observability` post, completing the feedback
  loop for on-call engineers.
